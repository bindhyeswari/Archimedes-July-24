<!DOCTYPE html>
<html ng-app="myApp">
<head lang="en">
    <meta charset="UTF-8">
    <title></title>
    <script src="bower_components/angular/angular.js"></script>
    <script>
        angular.module('myApp', []).run(function ($rootScope) {
            $rootScope.message = 'Hello from $rootScope';
        }).controller('MyController', function ($scope) {
            $scope.message = 'Hello from MyController\'s $scope';
        }).directive('gllLocalstorage', function () {
            return {
                // Directive Definition Object
                link: function (scope, element) {
                    // scope --> Active scope in the directive
                    console.log(scope.message);
                    console.log(element[0]);

                    // update the value from localstorage when the page loads


                    // write the value to localstorage when there is a change event
                    element[0].addEventListener('change', function () {
                        console.log(this.value);
                        console.log(this.dataset.uuid);
                        window.localStorage.setItem(this.dataset.uuid, this.value);
                    });
                }
            };
        }).directive('example', function () {
            return {
                template:'<div>{{message}}</div>'
            }
        });
    </script>
</head>
<body>
    <div>{{message}}</div> <!--Hello from $rootScope-->

        <input name="username" type="text" data-uuid="a3e29bd0-2b1e-4ed6-ba96-d4b33b923821" gll-localstorage/>


    <div ng-controller="MyController">
        <div>{{message}}</div> <!--Hello from mycontroller scope-->
        <div example></div> <!--<div>Hello from mycontroller scope</div>-->
    </div>

</body>
</html>